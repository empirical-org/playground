import React from 'react'
import { render } from 'react-dom'

class Word extends React.Component {

	constructor(props) {
  	super(props);
  	this.state = {time_elapsed:1, goldenNum: 0};
  }
  componentWillReceiveProps() {
  	if (this.props.currentTime%7 == 0 && (Math.random() > .5)) {
			let l = this.state.time_elapsed + 1;
			var randomNum = Math.floor(Math.random()*100);
			if (randomNum%2 == 0) {
				this.setState({time_elapsed: l, goldenNum: 1});
			} else {
				this.setState({time_elapsed: l, goldenNum: 0});
			}
		}
  }

  handleGoldenNum() {
  	this.props.onGoldenNum(this.state.goldenNum);
  }

	render() {
		var modified_word = this.props.word.substring(0, this.state.time_elapsed);

		var num_us = this.props.word.length - modified_word.length;
		var list_us = [];
		var index = 0;
		while (index < num_us) {
			list_us.push("_");
			index += 1;
		}
		var str_us = list_us.join(" ");
		modified_word = modified_word.concat(str_us);

		if (this.state.goldenNum) {
			if (this.props.found) {
				//this.handleGoldenNum();
				return (
					<div className="word found">
						{this.props.word}
					</div>
				)
			} else {
				return (
					<div className="word golden">
						{modified_word}
					</div>
				)
			}
		} else {
			if (this.props.found) {
				return (
					<div className="word found">
						{this.props.word}
					</div>
				)
			} else {
				return (
					<div className="word">
						{modified_word}
					</div>
				)
			}
		}
	}
}

export default Word